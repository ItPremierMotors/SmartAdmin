﻿<!DOCTYPE html>
@{
    var html_attributes = ViewBag.HTMLAttributes != null ? ViewBag.HTMLAttributes : "";
    var html_class = ViewBag.HTMLClass != null ? ViewBag.HTMLClass : "";

    var body_attributes = ViewBag.BodyAttributes ?? "";
    var body_class = ViewBag.BodyClass ?? "";
}
<html lang="en" @html_attributes class="@html_class">

<head>
    @await Html.PartialAsync("~/Views/Shared/Partials/_TitleMeta.cshtml")
    @RenderSection("styles", false)
    @await Html.PartialAsync("~/Views/Shared/Partials/_HeadCSS.cshtml")
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/izitoast/dist/css/iziToast.min.css">

</head>

<body class="@ViewBag.BodyClass">

    @RenderBody()


    @RenderSection("scripts", required: false)


    <!-- Scripts antes de cerrar </body> -->
    <script src="https://cdn.jsdelivr.net/npm/izitoast/dist/js/iziToast.min.js"></script>
    <script src="~/JS/toast-helper.js"></script>


    <!-- ✅ AGREGAR ESTO PARA ViewBag -->
    @if (ViewBag.SuccessMessage != null)
    {
        <script>
            Toast.success('@ViewBag.SuccessMessage');
        </script>
    }

    @if (ViewBag.ErrorMessage != null)
    {
        <script>Toast.error('@ViewBag.ErrorMessage');</script>
    }

    @if (ViewBag.WarningMessage != null)
    {
        <script>Toast.warning('@ViewBag.WarningMessage');</script>
    }

    @if (ViewBag.InfoMessage != null)
    {
        <script>Toast.info('@ViewBag.InfoMessage');</script>
    }

    <!-- ✅ AGREGAR ESTO PARA TempData (si usas RedirectToAction) -->
    @if (TempData["SuccessMessage"] != null)
    {
        <script>Toast.success('@TempData["SuccessMessage"]');</script>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <script>Toast.error('@TempData["ErrorMessage"]');</script>
    }

    @if (TempData["WarningMessage"] != null)
    {
        <script>Toast.warning('@TempData["WarningMessage"]');</script>
    }

    @if (TempData["InfoMessage"] != null)
    {
        <script>Toast.info('@TempData["InfoMessage"]');</script>
    }
</body>

</html>